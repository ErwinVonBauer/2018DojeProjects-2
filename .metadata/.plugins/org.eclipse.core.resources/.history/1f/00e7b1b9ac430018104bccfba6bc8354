package com.groupware.service;

import javax.servlet.http.HttpServletRequest;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.springframework.web.servlet.ModelAndView;
import com.groupware.dao.DraftDao;
import com.groupware.dao.UserDao;
import com.groupware.vo.DraftVo;

@Service
public class DraftService {
	@Autowired DraftDao draftdao;
	@Autowired UserDao userdao;
	@Autowired CommonService commonservice;
	
	public String loadpreview(HttpServletRequest req,DraftVo draftvo) {
		//int pk = Integer.parseInt(req.getParameter("ai"));
		int pk = req.getIntHeader("ai")
		System.out.println(pk);
		/*draftvo.setDraft_ai(pk);
		String content = draftdao.selectDocContent(draftvo);
		return content;*/
		return null;
	}
	
	public ModelAndView insertdoc(DraftVo draftvo, String viewName) {
		ModelAndView model = new ModelAndView();
		model.setViewName(viewName);
		model.addObject("vo",draftvo);
		
		System.out.println(draftvo.toString());
		System.out.println("success");
		draftdao.insertDoc(draftvo);
		return model;
	}
	
	public ModelAndView adduserinfo() {
		String loginedid = commonservice.getSession("id");
		
		String userai = userdao.selectUserPK(loginedid);
		String depai = userdao.selectDepPK(loginedid);
		String rankai = userdao.selectRankPK(loginedid);
		
		ModelAndView view = new ModelAndView();
		view.setViewName("/writedoc");
		view.addObject("userai",userai);
		view.addObject("depai",depai);
		view.addObject("rankai",rankai);
		System.out.println("selected infos:::"+userai+","+depai+","+rankai);
		return view;
	}
}
